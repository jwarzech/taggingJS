/*! taggingJS - v1.2.5 - 2014-04-21 */!function(a,b,c,d){a.fn.tagging=function(e){var f,g,h,i,j,k,l,m;return f=a(this),i=[],h={"case-sensitive":!1,"close-char":"&times;","close-class":"tag-i","edit-on-delete":!0,"forbidden-chars":[",",".","_","?"],"forbidden-chars-callback":b.alert,"forbidden-chars-text":"Forbidden character:","forbidden-words":[],"forbidden-words-callback":b.alert,"forbidden-words-text":"Forbidden word:","no-backspace":!1,"no-comma":!1,"no-del":!1,"no-duplicate":!0,"no-duplicate-callback":b.alert,"no-duplicate-text":"Duplicate tag:","no-enter":!1,"no-spacebar":!1,"pre-tags-separator":", ","tag-box-class":"tagging","tag-char":"#","tag-class":"tag","tags-input-name":"tag","type-zone-class":"type-zone","type-zone-placeholder":" ","tag-added-callback":null,"tag-removed-callback":null},g=a.extend({},h,e),j=function(a){var b,c,e;e={};for(b in h)c=a.data(b),c!==d&&(e[b]=c);return e},m=function(a,b,c){return a.apply(this,[b+" '"+c+"'."]),!1},k=function(b,d,e){var f,h,j,k,n,o,p,q;if(e=e||g,n=e["forbidden-words"],d||(d=b.val(),b.val("")),!d||!d.length)return!1;if(e["case-sensitive"]===!1&&(d=d.toLowerCase()),h=n.length,0!==h)for(f=0;h>f;f+=1)if(k=d.indexOf(n[f]),-1!==k)return b.val(""),o=e["forbidden-words-callback"],p=e["forbidden-words-text"],m(o,p,d);if(e["no-duplicate"]===!0&&(h=i.length,0!==h))for(f=0;h>f;f+=1)if(j=i[f].pure_text,j===d)return b.val(""),o=e["no-duplicate-callback"],p=e["no-duplicate-text"],m(o,p,d);return q=a(c.createElement("div")).addClass(e["tag-class"]).html("<span>"+e["tag-char"]+"</span> "+d),a(c.createElement("input")).attr("type","hidden").attr("name",e["tags-input-name"]+"[]").val(d).appendTo(q),a(c.createElement("a")).attr("role","button").addClass(e["close-class"]).html(e["close-char"]).click(function(){l(q,e)}).appendTo(q),q.pure_text=d,i.push(q),b.before(q),e["tag-added-callback"]&&e["tag-added-callback"].call(this,q,q.pure_text),!1},l=function(a,b){b=b||g,a.remove(),b["tag-removed-callback"]&&b["tag-removed-callback"].call(this,a,a.pure_text)},f.each(function(){var b,e,f,h,n,o,p;h=a(this),f=a.extend({},g,j(h)),b=h.text(),h.empty(),e=a(c.createElement("input")).addClass(f["type-zone-class"]).attr("placeholder",f["type-zone-placeholder"]).attr("contenteditable",!0),h.addClass(f["tag-box-class"]).append(e),n={enter:13,comma:188},f["no-spacebar"]||(n.spacebar=32),p={del:46,backspace:8},o=a.extend({},n,p),e.on("keydown",function(a){var b,c,g,h,j,q,r,s,t,u;if(q=f["forbidden-chars"],r=e.val(),s=a.which,""===r){for(c in o)if(s===o[c])return n[c]!==d?(a.preventDefault(),!0):(p[c]!==d&&(f["no-"+c]||(a.preventDefault(),b=i.pop(),b!==d&&(l(b,f),f["edit-on-delete"]&&e.focus().val("").val(b.pure_text)))),!1)}else{for(c in n)if(s===n[c])return f["no-"+c]?!1:(a.preventDefault(),k(e,null,f));for(j=q.length,h=0;j>h;h+=1)if(g=r.indexOf(q[h]),-1!==g)return a.preventDefault(),r=r.replace(q[h],""),e.focus().val("").val(r),t=f["forbidden-chars-callback"],u=f["forbidden-chars-text"],m(t,u,q[h])}return!0}),h.on("click",function(){e.focus()}),e.on("focus",function(){this.selectionStart=this.selectionEnd=a(this).val().length}),a.each(b.split(f["pre-tags-separator"]),function(){k(e,this,f)})}),this}}(window.jQuery,window,document);